<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="358px" preserveAspectRatio="none" style="width:800px;height:358px;" version="1.1" viewBox="0 0 800 358" width="800px" zoomAndPan="magnify"><defs><filter height="300%" id="fpbt1l6ppcg9t" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class Subject--><rect fill="#FEFECE" filter="url(#fpbt1l6ppcg9t)" height="99.8203" id="Subject" style="stroke: #A80036; stroke-width: 1.5;" width="181" x="222" y="8"/><ellipse cx="287.25" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M289.7231,30.1431 Q289.1421,30.4419 288.5029,30.5913 Q287.8638,30.7407 287.1582,30.7407 Q284.6514,30.7407 283.3315,29.0889 Q282.0117,27.437 282.0117,24.3159 Q282.0117,21.1865 283.3315,19.5347 Q284.6514,17.8828 287.1582,17.8828 Q287.8638,17.8828 288.5112,18.0322 Q289.1587,18.1816 289.7231,18.4805 L289.7231,21.2031 Q289.0923,20.6221 288.4988,20.3523 Q287.9053,20.0825 287.2744,20.0825 Q285.9297,20.0825 285.2449,21.1492 Q284.5601,22.2158 284.5601,24.3159 Q284.5601,26.4077 285.2449,27.4744 Q285.9297,28.541 287.2744,28.541 Q287.9053,28.541 288.4988,28.2712 Q289.0923,28.0015 289.7231,27.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="42" x="307.75" y="28.5352">Subject</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="223" x2="402" y1="40" y2="40"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="230" y="48.9775"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="155" x="242" y="54.6348">observers : List&lt;Observer*&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="223" x2="402" y1="60.9551" y2="60.9551"/><ellipse cx="233" cy="72.9326" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="98" x="242" y="75.5898">Attach(Observer*)</text><ellipse cx="233" cy="85.8877" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="242" y="88.5449">Detach(Observer*)</text><ellipse cx="233" cy="98.8428" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="242" y="101.5">Notify()</text><!--class Observer--><rect fill="#FEFECE" filter="url(#fpbt1l6ppcg9t)" height="52.9551" id="Observer" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="438" y="31.5"/><ellipse cx="453" cy="47.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M449.4277,43.7651 L449.4277,41.6069 L456.8071,41.6069 L456.8071,43.7651 L454.3418,43.7651 L454.3418,51.8418 L456.8071,51.8418 L456.8071,54 L449.4277,54 L449.4277,51.8418 L451.8931,51.8418 L451.8931,43.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="53" x="467" y="52.0352">Observer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="439" x2="522" y1="63.5" y2="63.5"/><ellipse cx="449" cy="75.4775" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="458" y="78.1348">Update()</text><!--class ConcreteSubject--><rect fill="#FEFECE" filter="url(#fpbt1l6ppcg9t)" height="86.8652" id="ConcreteSubject" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="251" y="168"/><ellipse cx="266" cy="184" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M268.4731,190.1431 Q267.8921,190.4419 267.2529,190.5913 Q266.6138,190.7407 265.9082,190.7407 Q263.4014,190.7407 262.0815,189.0889 Q260.7617,187.437 260.7617,184.3159 Q260.7617,181.1865 262.0815,179.5347 Q263.4014,177.8828 265.9082,177.8828 Q266.6138,177.8828 267.2612,178.0322 Q267.9087,178.1816 268.4731,178.4805 L268.4731,181.2031 Q267.8423,180.6221 267.2488,180.3523 Q266.6553,180.0825 266.0244,180.0825 Q264.6797,180.0825 263.9949,181.1492 Q263.3101,182.2158 263.3101,184.3159 Q263.3101,186.4077 263.9949,187.4744 Q264.6797,188.541 266.0244,188.541 Q266.6553,188.541 267.2488,188.2712 Q267.8423,188.0015 268.4731,187.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="93" x="280" y="188.5352">ConcreteSubject</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="375" y1="200" y2="200"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="259" y="208.9775"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="271" y="214.6348">state : State</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="252" x2="375" y1="220.9551" y2="220.9551"/><ellipse cx="262" cy="232.9326" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="271" y="235.5898">GetState()</text><ellipse cx="262" cy="245.8877" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="271" y="248.5449">SetState()</text><!--class ConcreteObserver--><rect fill="#FEFECE" filter="url(#fpbt1l6ppcg9t)" height="86.8652" id="ConcreteObserver" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="411.5" y="168"/><ellipse cx="426.5" cy="184" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M428.9731,190.1431 Q428.3921,190.4419 427.7529,190.5913 Q427.1138,190.7407 426.4082,190.7407 Q423.9014,190.7407 422.5815,189.0889 Q421.2617,187.437 421.2617,184.3159 Q421.2617,181.1865 422.5815,179.5347 Q423.9014,177.8828 426.4082,177.8828 Q427.1138,177.8828 427.7612,178.0322 Q428.4087,178.1816 428.9731,178.4805 L428.9731,181.2031 Q428.3423,180.6221 427.7488,180.3523 Q427.1553,180.0825 426.5244,180.0825 Q425.1797,180.0825 424.4949,181.1492 Q423.8101,182.2158 423.8101,184.3159 Q423.8101,186.4077 424.4949,187.4744 Q425.1797,188.541 426.5244,188.541 Q427.1553,188.541 427.7488,188.2712 Q428.3423,188.0015 428.9731,187.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="104" x="440.5" y="188.5352">ConcreteObserver</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="412.5" x2="546.5" y1="200" y2="200"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="419.5" y="208.9775"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="431.5" y="214.6348">state : State</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="419.5" y="221.9326"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="431.5" y="227.5898">subject : Subject*</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="412.5" x2="546.5" y1="233.9102" y2="233.9102"/><ellipse cx="422.5" cy="245.8877" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="46" x="431.5" y="248.5449">Update()</text><!--class State--><rect fill="#FEFECE" filter="url(#fpbt1l6ppcg9t)" height="32" id="State" style="stroke: #A80036; stroke-width: 1.5;" width="60" x="366.5" y="315"/><ellipse cx="381.5" cy="331" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M383.9731,337.1431 Q383.3921,337.4419 382.7529,337.5913 Q382.1138,337.7407 381.4082,337.7407 Q378.9014,337.7407 377.5815,336.0889 Q376.2617,334.437 376.2617,331.3159 Q376.2617,328.1865 377.5815,326.5347 Q378.9014,324.8828 381.4082,324.8828 Q382.1138,324.8828 382.7612,325.0322 Q383.4087,325.1816 383.9731,325.4805 L383.9731,328.2031 Q383.3423,327.6221 382.7488,327.3523 Q382.1553,327.0825 381.5244,327.0825 Q380.1797,327.0825 379.4949,328.1492 Q378.8101,329.2158 378.8101,331.3159 Q378.8101,333.4077 379.4949,334.4744 Q380.1797,335.541 381.5244,335.541 Q382.1553,335.541 382.7488,335.2712 Q383.3423,335.0015 383.9731,334.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="28" x="395.5" y="335.5352">State</text><path d="M6,22.5 L6,93.7422 A0,0 0 0 0 6,93.7422 L187,93.7422 A0,0 0 0 0 187,93.7422 L187,62 L221.9534,58 L187,54 L187,32.5 L177,22.5 L6,22.5 A0,0 0 0 0 6,22.5 " fill="#FBFB77" filter="url(#fpbt1l6ppcg9t)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M177,22.5 L177,32.5 L187,32.5 L177,22.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="12" y="40.0684">Subject::Notify() {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="20" y="55.3789">for (auto&amp; o : observers)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="28" y="70.6895">o-&gt;Update();</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="12" y="86">}</text><path d="M582.5,183.5 L582.5,207.5 L547.8984,211.5 L582.5,215.5 L582.5,239.4316 A0,0 0 0 0 582.5,239.4316 L788.5,239.4316 A0,0 0 0 0 788.5,239.4316 L788.5,193.5 L778.5,183.5 L582.5,183.5 A0,0 0 0 0 582.5,183.5 " fill="#FBFB77" filter="url(#fpbt1l6ppcg9t)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M778.5,183.5 L778.5,193.5 L788.5,193.5 L778.5,183.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="588.5" y="201.0684">ConcreteObserver::Update() {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="596.5" y="216.3789">state = subject-&gt;GetState();</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="588.5" y="231.6895">}</text><!--link Subject to Observer--><path d="M403.0625,58 C412.9368,58 422.811,58 432.6853,58 " fill="none" id="Subject-Observer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="437.8489,58,428.8489,54,432.8489,58,428.8489,62,437.8489,58" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Subject to ConcreteSubject--><path d="M312.9579,128.2873 C313.0457,141.7609 313.1352,155.5021 313.2155,167.8339 " fill="none" id="Subject-ConcreteSubject" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="305.958,128.3069,312.8274,108.2616,319.9577,128.2156,305.958,128.3069" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Observer to ConcreteObserver--><path d="M480.1943,104.9239 C480.0636,124.9899 479.9119,148.2768 479.7837,167.9557 " fill="none" id="Observer-ConcreteObserver" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="473.1956,104.6916,480.3258,84.7377,487.1953,104.7829,473.1956,104.6916" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ConcreteSubject to ConcreteObserver--><path d="M381.2916,211.5 C391.2687,211.5 401.2457,211.5 411.2228,211.5 " fill="none" id="ConcreteSubject-ConcreteObserver" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="376.0742,211.5,385.0742,215.5,381.0742,211.5,385.0742,207.5,376.0742,211.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ConcreteSubject to State--><path d="M343.9348,255.3188 C357.0165,274.1533 371.6807,295.2662 382.1899,310.3969 " fill="none" id="ConcreteSubject-State" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="385.3116,314.8915,383.4627,305.2177,382.4593,310.7849,376.8921,309.7814,385.3116,314.8915" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ConcreteObserver to State--><path d="M449.0652,255.3188 C435.9835,274.1533 421.3193,295.2662 410.8101,310.3969 " fill="none" id="ConcreteObserver-State" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="407.6884,314.8915,416.1079,309.7814,410.5407,310.7849,409.5373,305.2177,407.6884,314.8915" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
Subject -> Observer 
Subject <|- - ConcreteSubject
Observer <|- - ConcreteObserver
ConcreteSubject <- ConcreteObserver
ConcreteSubject - -> State
ConcreteObserver - -> State

class Subject {
  -observers : List<Observer*>
  +Attach(Observer*)
  +Detach(Observer*)
  +Notify()
}
class ConcreteSubject {
  -state : State
  +GetState()
  +SetState()
}
interface Observer {
  {abstract} +Update()
}
class ConcreteObserver {
  -state : State
  -subject : Subject*
  +Update()
}

note left of Subject
 Subject::Notify() {
   for (auto& o : observers)
     o->Update();
 }
end note

note right of ConcreteObserver
  ConcreteObserver::Update() {
    state = subject->GetState();
  }
end note

hide empty attributes
hide empty methods
@enduml

PlantUML version 1.2019.04(Fri Mar 29 23:44:36 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_152-b16
Operating System: Mac OS X
OS Version: 10.14
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>